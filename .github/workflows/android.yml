name: Android CI

on:
  workflow_dispatch:
  push:
  pull_request:

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: Setup Python
      uses: actions/setup-python@v5.3.0

    - name: setup-depot-tools
      uses: newkdev/setup-depot-tools@v1.0.1
      
 #   - name: Install build deps 
      #run: ./build/install-build-deps.sh

    - name: get-cmake
  # You may pin to the exact commit or the version.
  # uses: lukka/get-cmake@5979409e62bdf841487c5fb3c053149de97a86d3
      uses: lukka/get-cmake@v3.31.2

    - name: generate args
      run: gn args out/Android <<< "target_os = \"android\"\ntarget_cpu = \"arm64\"\nangle_enable_vulkan = true\nis_component_build = false\nis_official_build = true\nis_debug = false"

      # dis don work ://
    - name: Build angle
      run: autoninja -C out/Android angle_apks
